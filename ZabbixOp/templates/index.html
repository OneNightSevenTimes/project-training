{% extends "base.html" %}


{% block sidebar %}
    <div>
          <ul class="nav nav-sidebar">
            <li class="active" onclick="Change(this)">
                <a href="#">zabbix主机 <span class="badge pull-right">{{ total_host_num }}</span></a>
            </li>
            <li onclick="Change(this)">
                <a href="#">zabbix主机组<span class="badge pull-right">{{ total_hostgroup_num }}</span></a></lii>
            </li>
            <li onclick="Change(this)">
                <a href="#">zabbix 模板<span class="badge pull-right">{{ total_template_num }}</span></a></li>
            </li>
          </ul>

    </div>
{% endblock %}

{% block content-panel %}
       <div class="row wrapper border-bottom white-bg page-heading">
           <div class="col-sm-10">
                <ol class="breadcrumb">
                    <li>
                        <a href="{% url "zabbix_index" %}">首页</a>
                    </li>
                    <li class="active">
                        <strong>监控列表</strong>
                    </li>

                </ol>
            </div>
            <div class="col-sm-2">

           </div>
        </div>
        <div style="margin-top: 20px;">

                <div class="clearfix">
                    <div class="col-md-6">
                        <div id="summary_chart" style="height:150px;" data-highcharts-chart="0"><div class="highcharts-container" id="highcharts-0" style="position: relative; overflow: hidden; width: 484px; height: 150px; text-align: left; line-height: normal; z-index: 0; -webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><svg version="1.1" style="font-family:&quot;Lucida Grande&quot;, &quot;Lucida Sans Unicode&quot;, Arial, Helvetica, sans-serif;font-size:12px;" xmlns="http://www.w3.org/2000/svg" width="484" height="150"><desc>Created with Highcharts 4.1.7</desc><defs><clipPath id="highcharts-1"><rect x="0" y="0" width="391" height="125"></rect></clipPath></defs><rect x="0" y="0" width="484" height="150" strokeWidth="0" fill="#FFFFFF" class=" highcharts-background"></rect><g class="highcharts-button" style="cursor:default;" stroke-linecap="round" transform="translate(450,10)"><title>Chart context menu</title><rect x="0.5" y="0.5" width="24" height="22" strokeWidth="1" fill="white" stroke="none" stroke-width="1" rx="2" ry="2"></rect><path fill="#E0E0E0" d="M 6 6.5 L 20 6.5 M 6 11.5 L 20 11.5 M 6 16.5 L 20 16.5" stroke="#666" stroke-width="3" zIndex="1"></path><text x="0" zIndex="1" style="color:black;fill:black;" y="12"></text></g><g class="highcharts-series-group" zIndex="3"><path fill="rgba(124,181,236,0.25)" d="M 0 0"></path><g class="highcharts-series highcharts-tracker" visibility="visible" zIndex="0.1" transform="translate(10,10) scale(1 1)" style="cursor:pointer;"><path fill="#7cb5ec" d="M 195.489307156806 10.00000108892283 A 52.5 52.5 0 1 1 155.8028361367344 28.14326585350348 L 195.5 62.5 A 0 0 0 1 0 195.5 62.5 Z" stroke="#FFFFFF" stroke-width="1" stroke-linejoin="round" transform="translate(0,0)"></path><path fill="#434348" d="M 155.83721271373506 28.103585874622055 A 52.5 52.5 0 0 1 195.42707855325125 10.00005064323772 L 195.5 62.5 A 0 0 0 0 0 195.5 62.5 Z" stroke="#FFFFFF" stroke-width="1" stroke-linejoin="round" transform="translate(0,0)"></path></g><g class="highcharts-markers" visibility="visible" zIndex="0.1" transform="translate(10,10) scale(1 1)"></g></g><g class="highcharts-data-labels highcharts-tracker" visibility="visible" zIndex="6" transform="translate(10,10) scale(1 1)" opacity="1" style="cursor:pointer;"><g zIndex="1" style="cursor:pointer;" transform="translate(227,100)" visibility="inherit"><text x="5" zIndex="1" style="font-size: 11px; font-weight: bold; color: rgb(0, 0, 0); fill: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 0px 6px, rgb(255, 255, 255) 0px 0px 3px; text-rendering: geometricPrecision;" y="17"><tspan style="font-weight:bold">闲置</tspan><tspan dx="0">: {{ total_hostgroup_num }} %</tspan></text></g><g zIndex="1" style="cursor:pointer;" transform="translate(88,5)" visibility="inherit"><text x="5" zIndex="1" style="font-size: 11px; font-weight: bold; color: rgb(0, 0, 0); fill: rgb(0, 0, 0); text-shadow: rgb(255, 255, 255) 0px 0px 6px, rgb(255, 255, 255) 0px 0px 3px; text-rendering: geometricPrecision;" y="17"><tspan style="font-weight:bold">占用</tspan><tspan dx="0">: {{ total_host_num }} %</tspan></text></g></g><g class="highcharts-legend" zIndex="7" transform="translate(413,80)"><g zIndex="1"><g><g class="highcharts-legend-item" zIndex="1" transform="translate(8,3)"><text x="21" style="color:#3E576F;font-size:12px;font-weight:bold;cursor:pointer;padding:8px;fill:#3E576F;" text-anchor="start" zIndex="2" y="15">闲置</text><rect x="0" y="4" width="16" height="12" zIndex="3" fill="#7cb5ec"></rect></g><g class="highcharts-legend-item" zIndex="1" transform="translate(8,25)"><text x="21" y="15" style="color:#3E576F;font-size:12px;font-weight:bold;cursor:pointer;padding:8px;fill:#3E576F;" text-anchor="start" zIndex="2">占用</text><rect x="0" y="4" width="16" height="12" zIndex="3" fill="#434348"></rect></g></g></g></g><g class="highcharts-tooltip" zIndex="8" style="cursor:default;padding:0;white-space:nowrap;" transform="translate(0,-9999)"><path fill="none" d="M 3.5 0.5 L 13.5 0.5 C 16.5 0.5 16.5 0.5 16.5 3.5 L 16.5 13.5 C 16.5 16.5 16.5 16.5 13.5 16.5 L 3.5 16.5 C 0.5 16.5 0.5 16.5 0.5 13.5 L 0.5 3.5 C 0.5 0.5 0.5 0.5 3.5 0.5" isShadow="true" stroke="black" stroke-opacity="0.049999999999999996" stroke-width="5" transform="translate(1, 1)"></path><path fill="none" d="M 3.5 0.5 L 13.5 0.5 C 16.5 0.5 16.5 0.5 16.5 3.5 L 16.5 13.5 C 16.5 16.5 16.5 16.5 13.5 16.5 L 3.5 16.5 C 0.5 16.5 0.5 16.5 0.5 13.5 L 0.5 3.5 C 0.5 0.5 0.5 0.5 3.5 0.5" isShadow="true" stroke="black" stroke-opacity="0.09999999999999999" stroke-width="3" transform="translate(1, 1)"></path><path fill="none" d="M 3.5 0.5 L 13.5 0.5 C 16.5 0.5 16.5 0.5 16.5 3.5 L 16.5 13.5 C 16.5 16.5 16.5 16.5 13.5 16.5 L 3.5 16.5 C 0.5 16.5 0.5 16.5 0.5 13.5 L 0.5 3.5 C 0.5 0.5 0.5 0.5 3.5 0.5" isShadow="true" stroke="black" stroke-opacity="0.15" stroke-width="1" transform="translate(1, 1)"></path><path fill="rgba(249, 249, 249, .85)" d="M 3.5 0.5 L 13.5 0.5 C 16.5 0.5 16.5 0.5 16.5 3.5 L 16.5 13.5 C 16.5 16.5 16.5 16.5 13.5 16.5 L 3.5 16.5 C 0.5 16.5 0.5 16.5 0.5 13.5 L 0.5 3.5 C 0.5 0.5 0.5 0.5 3.5 0.5"></path><text x="8" zIndex="1" style="font-size:12px;color:#333333;fill:#333333;" y="20"></text></g><text x="474" text-anchor="end" zIndex="8" style="cursor:pointer;color:#909090;font-size:9px;fill:#909090;" y="145"></text></svg></div></div>
                    </div>
                    <div class="col-md-6">
                        <div class="col-md-offset-1 col-md-10">
                            <div class="user-section-wrap">
                                <div class="section-head">
                                    <div class="section-icon">
                                <span class="fa-stack">
                                  <i class="fa fa-circle-thin fa-stack-2x"></i>
                                  <i class="fa fa-ellipsis-h fa-stack-1x"></i>
                                </span>
                                    </div>
                                </div>
                                <div class="section-content-wrap">
                                    <div class="section-content">
                                        <div class="three-row">
                                            <div class="line">
                                                <span id="summary_all" class="line-num" style="color: #337ab7;">{{ total_host_num }}</span>
                                                <span class="line-text">主机监控总数量</span>
                                            </div>
                                        </div>
                                        <div class="three-row">
                                            <div class="line">
                                                <span id="summary_idle" class="line-num" style="color: green" ;="">{{ total_hostgroup_num }}</span>
                                                <span class="line-text">主机组总数量</span>
                                            </div>
                                        </div>
                                        <div class="three-row">
                                            <div class="line">
                                                <span id="summary_use" class="line-num" style="color: #ff0000" ;="">{{ total_template_num }}</span>
                                                <span class="line-text">模板总数量</span>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>

                </div>
        </div>

    <div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
        <div class="col-sm-12">
            <div class="ibox float-e-margins" id="all">
                <div class="ibox-content">
                    <form id="asset_form">
                        <div class="col-sm-1" style="padding-left: 0">
                            <a href="{% url "add_host" %}" onclick="AddHost()" class="btn btn-sm btn-primary "> 主机操作 </a>
                        </div>

                        <div class="col-sm-7" style="padding-left: 0px">

                            <input type="button" onclick="CheckAll('#edit_mode', '#tb1');" value="全选" />
                            <input type="button" onclick="CheckReverse('#edit_mode', '#tb1');" value="反选" />
                            <input type="button" onclick="CheckCancel('#edit_mode', '#tb1');" value="取消" />
                            <a id="edit_mode" class="edit-mode"   onclick="EditMode(this, '#tb1');">进入编辑模式</a>
                        </div>
                <div class="ibox-content">


                        <table class="table table-striped table-bordered table-hover " id="editable" name="editable">
                            <thead>
                                <tr>
                                    <th class="text-center">
                                        <input id="checkall" type="checkbox" class="i-checks" name="checkall" value="checkall" data-editable='false' onclick="check_all('asset_form')">
                                    </th>
                                    <th class="text-center"> 主机ID </th>
                                    <th class="text-center" name="ip"> IP地址 </th>
                                    <th class="text-center"> 主机名 </th>
                                    <th class="text-center"> 主机状态 </th>
                                    <!--<th class="text-center"> 操作 </th>-->

                                </tr>
                            </thead>
                            <tbody id="tb1">

                            {% for host_dict in views_hostlist %}
                                <tr class="gradeX" >
                                    <td class="text-center" name="id" value="2" data-editable='false'>
                                        <input name="id" value="2" type="checkbox" class="i-checks">
                                    </td>
                                    <td class="text-center hostname"> <a href="/jasset/asset/detail/?id=2">{{ host_dict.HostId }}</a></td>
                                    <td class="text-center"> {{ host_dict.HostIp }} </td>
                                    <td class="text-center" edit="true">{{ host_dict.HostName }} </td>
                                    <td id="available" class="text-center btn-xs  btn-success">{{ host_dict.available }}</td>

                                  <!--  <td class="text-center" data-editable='false'>
                                        <a href="/jasset/asset/edit/?id=2" class="btn btn-xs btn-info">编辑</a>
                                        <a value="2" class="conn btn btn-xs btn-warning">连接</a>
                                        <a value="/jasset/asset/del/?id=2" class="btn btn-xs btn-danger asset_del">删除</a>
                                    </td>-->
                                </tr>

                            {% endfor %}

                            </tbody>
                        </table>
                        <!--
                        <div class="row">
                            <div class="col-sm-6">
                                <input type="button" id="asset_del" class="btn btn-danger btn-sm"  name="del_button" value="删除"/>
                                <a value="/jasset/asset/edit_batch/" type="button" class="btn btn-sm btn-warning iframe">修改</a>
                                <input type="button" id="asset_update" class="btn btn-info btn-sm"  name="update_button" value="更新"/>

                                <input type="button" id="exec_cmd" class="btn btn-sm btn-primary"  name="exec_cmd" value="执行命令"/>
                            </div>
                            <div class="col-sm-6">
                         -->

                            <div style="padding-left: 25%;">
                                <nav>
                                    <ul class="pagination ">
                                                                        {{ pager_html | safe }}
                                    </ul>
                                </nav>
                            </div>
</div>

{% endblock %}
{% block bottom-js %}
#    <script src="/static/js/edit_row.js"></script>
    <script src="/static/js/jquery-1.12.1.min.js"></script>
    <script>
        window.onload = function isAvailable(){
            var available = $("#tb1").children();
            available.each(function() {
                var tr=$(this)

                if (tr.find('available').text() == "Not Monitored") {
                    tr.find('available').addClass("available");
                }
            });

        }

    </script>

{% endblock %}
